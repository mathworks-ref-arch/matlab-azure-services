<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Null data &mdash; MATLAB Interface for Azure Services  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/mathworks.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Dynamic Data" href="Dynamics.html" />
    <link rel="prev" title="Authentication" href="ADXAuthentication.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> MATLAB Interface for Azure Services
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Overview.html">MATLAB Interface <em>for Azure Services</em></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Azure Data Explorer</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ADXGettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="ADXAuthentication.html">Authentication</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Null data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#null-error">Null error</a></li>
<li class="toctree-l2"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Dynamics.html">Dynamic Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="Performance.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="OpenAPI.html">Azure Data Explorer OpenAPI Spec</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Azure Key Vault</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="KeyVault.html">Azure Key Vault</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Azure Data Lake Storage Gen2</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="DataLakeStorageGen2.html">Azure Data Lake Storage Gen2</a></li>
<li class="toctree-l1"><a class="reference internal" href="File.html">File Data Lake Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="Queue.html">Queue Storage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Further topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Deployment.html">MATLAB Compiler (SDK) Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="Testing.html">Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="APIReference.html">MATLAB Interface <em>for Azure Services</em> - API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="References.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MATLAB Interface for Azure Services</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Null data</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/mathworks-ref-arch/matlab-azure-services/blob/main/Documentation/NullData.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="null-data">
<h1>Null data<a class="headerlink" href="#null-data" title="Permalink to this headline"></a></h1>
<p>In ADX all data types except string may have null values indicating that data is
not present. When bringing such data into MATLAB® consideration must be given to
the potential presence of null values. This package provides a number of approaches
to dealing with this issue.</p>
<p>Many MATLAB types support the concept of “missing” data where the <code class="docutils literal notranslate"><span class="pre">missing</span></code> <em>value</em>
can be used to identify data that is not available, see also <code class="docutils literal notranslate"><span class="pre">ismissing()</span></code>.
Other datatypes support <code class="docutils literal notranslate"><span class="pre">NaN</span></code> or <code class="docutils literal notranslate"><span class="pre">NaT</span></code> to indicate <em>anomalous</em> values.</p>
<p>The enumeration class <code class="docutils literal notranslate"><span class="pre">mathworks.adx.NullPolicy</span></code> can be passed as an
option to query functions to control how nulls are handled in responses. The
possible values of the enumeration are defined in the following table:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-left head"><p>Enumeration</p></th>
<th class="head"><p>Effect</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>ErrorAny</p></td>
<td><p>Error if any null values are detected</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>ErrorLogicalInt32Int64</p></td>
<td><p>Error if null values are detected for logicals, int32s or int64s</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>AllowAll</p></td>
<td><p>All null types to map to missing, NaN or NaT for all data types</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Convert2Double</p></td>
<td><p>Convert logicals, int32s, &amp; int64s to doubles</p></td>
</tr>
</tbody>
</table>
<p>The default behavior is defined by <code class="docutils literal notranslate"><span class="pre">ErrorLogicalInt32Int64</span></code>.</p>
<p>Using the <code class="docutils literal notranslate"><span class="pre">AllowAll</span></code> policy has the effect of returning data as cell array values
This has an impact on memory and performance, for large queries altering the data
or the query to remove null may be preferable.</p>
<p>The following table defines how an ADX null is translated to a MATLAB value
subject to the enumeration value.
As dynamics can be converted into other types this table assumes the valid value
is not converted and thus remains a cell array containing a character vector.</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-left head"><p>Kusto type</p></th>
<th class="text-left head"><p>MATLAB type</p></th>
<th class="text-left head"><p>ADX Value</p></th>
<th class="text-left head"><p>ErrorAny</p></th>
<th class="text-left head"><p>ErrorLogicalInt32Int64</p></th>
<th class="text-left head"><p>AllowAll</p></th>
<th class="text-left head"><p>Convert2Double</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>bool</p></td>
<td class="text-left"><p>logical</p></td>
<td class="text-left"><p>null</p></td>
<td class="text-left"><p>error</p></td>
<td class="text-left"><p>error</p></td>
<td class="text-left"><p>{missing}</p></td>
<td class="text-left"><p>NaN</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>valid</p></td>
<td class="text-left"><p>logical</p></td>
<td class="text-left"><p>logical</p></td>
<td class="text-left"><p>{logical}</p></td>
<td class="text-left"><p>0 or 1 as a double</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>int</p></td>
<td class="text-left"><p>int32</p></td>
<td class="text-left"><p>null</p></td>
<td class="text-left"><p>error</p></td>
<td class="text-left"><p>error</p></td>
<td class="text-left"><p>{missing}</p></td>
<td class="text-left"><p>NaN</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>valid</p></td>
<td class="text-left"><p>int32</p></td>
<td class="text-left"><p>int32</p></td>
<td class="text-left"><p>{int32}</p></td>
<td class="text-left"><p>as a double</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>long</p></td>
<td class="text-left"><p>int64</p></td>
<td class="text-left"><p>null</p></td>
<td class="text-left"><p>error</p></td>
<td class="text-left"><p>error</p></td>
<td class="text-left"><p>{missing}</p></td>
<td class="text-left"><p>NaN</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>valid</p></td>
<td class="text-left"><p>int64</p></td>
<td class="text-left"><p>int64</p></td>
<td class="text-left"><p>{int64}</p></td>
<td class="text-left"><p>as a double [N1]</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>datetime</p></td>
<td class="text-left"><p>datetime</p></td>
<td class="text-left"><p>null [N5]</p></td>
<td class="text-left"><p>error</p></td>
<td class="text-left"><p>NaT</p></td>
<td class="text-left"><p>NaT</p></td>
<td class="text-left"><p>NaT</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>valid</p></td>
<td class="text-left"><p>datetime</p></td>
<td class="text-left"><p>datetime</p></td>
<td class="text-left"><p>datetime</p></td>
<td class="text-left"><p>datetime</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>guid</p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>null</p></td>
<td class="text-left"><p>error</p></td>
<td class="text-left"><p>missing</p></td>
<td class="text-left"><p>missing</p></td>
<td class="text-left"><p>missing</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>valid</p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>string</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>real</p></td>
<td class="text-left"><p>double</p></td>
<td class="text-left"><p>null</p></td>
<td class="text-left"><p>error</p></td>
<td class="text-left"><p>NaN</p></td>
<td class="text-left"><p>NaN</p></td>
<td class="text-left"><p>NaN</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>valid</p></td>
<td class="text-left"><p>double</p></td>
<td class="text-left"><p>double</p></td>
<td class="text-left"><p>double</p></td>
<td class="text-left"><p>double</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>string</p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>N/A [N3]</p></td>
<td class="text-left"><p>error</p></td>
<td class="text-left"><p>“”</p></td>
<td class="text-left"><p>“”</p></td>
<td class="text-left"><p>“”</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>N/A [N4]</p></td>
<td class="text-left"><p>“”</p></td>
<td class="text-left"><p>“”</p></td>
<td class="text-left"><p>“”</p></td>
<td class="text-left"><p>“”</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>valid</p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>string</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>timespan</p></td>
<td class="text-left"><p>duration</p></td>
<td class="text-left"><p>null</p></td>
<td class="text-left"><p>error</p></td>
<td class="text-left"><p>NaN</p></td>
<td class="text-left"><p>NaN</p></td>
<td class="text-left"><p>NaN</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>valid</p></td>
<td class="text-left"><p>duration</p></td>
<td class="text-left"><p>duration</p></td>
<td class="text-left"><p>duration</p></td>
<td class="text-left"><p>duration</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>decimal</p></td>
<td class="text-left"><p>double</p></td>
<td class="text-left"><p>null</p></td>
<td class="text-left"><p>error</p></td>
<td class="text-left"><p>NaN</p></td>
<td class="text-left"><p>NaN</p></td>
<td class="text-left"><p>NaN</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>valid</p></td>
<td class="text-left"><p>double</p></td>
<td class="text-left"><p>double</p></td>
<td class="text-left"><p>double</p></td>
<td class="text-left"><p>double [N1]</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>dynamic</p></td>
<td class="text-left"><p>char [N2]</p></td>
<td class="text-left"><p>null</p></td>
<td class="text-left"><p>error</p></td>
<td class="text-left"><p>{missing}</p></td>
<td class="text-left"><p>{missing}</p></td>
<td class="text-left"><p>{missing} [N2]</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>valid</p></td>
<td class="text-left"><p>{char} [N2]</p></td>
<td class="text-left"><p>{char} [N2]</p></td>
<td class="text-left"><p>{char} [N2]</p></td>
<td class="text-left"><p>{char} [N2]</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Notes</p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[N1]</p></td>
<td><p>Subject to loss of precision</p></td>
</tr>
<tr class="row-odd"><td><p>[N2]</p></td>
<td><p>Assuming the value is not decode, see <a class="reference internal" href="Dynamics.html"><span class="doc std std-doc">Dynamics.md</span></a></p></td>
</tr>
<tr class="row-even"><td><p>[N3]</p></td>
<td><p>Kusto does not store null strings, however metadata and commands can return null strings that still need to be converted to tables</p></td>
</tr>
<tr class="row-odd"><td><p>[N4]</p></td>
<td><p>If the allowNullStrings argument is set the the nullPolicy is not applied a warning is issued, this can be used to enable different behavior in queries and commands for example</p></td>
</tr>
<tr class="row-even"><td><p>[N5]</p></td>
<td><p>When a datetime NaT is returned its timezone is set to UTC as per other datetimes</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>Note that metadata tables returned along side conventional query results also
adopt the null policy applied to the query result.</p>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">testNulls</span></code> test function in <code class="docutils literal notranslate"><span class="pre">/matlab-azure-adx/Software/MATLAB/test/unit/testDataTypes.m</span></code>
shows some simple queries that can be used to easily return nulls for testing purposes.</p>
<section id="null-error">
<h2>Null error<a class="headerlink" href="#null-error" title="Permalink to this headline"></a></h2>
<p>If a null is encountered, in this case a null long/int64 is returned when using a
null policy that does not support it an error such as the following is returned.
In this case a possible solution would be:
<code class="docutils literal notranslate"><span class="pre">mathworks.adx.run(myQueryString,</span> <span class="pre">mathworks.adx.NullPolicy.AllowAll)</span></code>
It may be preferable to resolve this issue in the query or the data set such that
the data returned to MATLAB is free of nulls.</p>
<div class="highlight-matlabsession notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt; </span><span class="p">[</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">success</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">mathworks</span><span class="p">.</span><span class="n">adx</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">myQueryString</span><span class="p">)</span><span class="w"></span>
<span class="go">Error using mathworks.internal.adx.getRowWithSchema&gt;convert2Int64 (line 237)</span>
<span class="go">int64 null values are not supported when using: mathworks.adx.NullPolicy.ErrorLogicalInt32Int64, consider using mathworks.adx.NullPolicy.AllowAll, (2,18)</span>
<span class="go">Error in mathworks.internal.adx.getRowWithSchema (line 50)</span>
<span class="go">                row{colIdx} = convert2Int64(curElement, nullPolicy, rowIdx, colIdx);</span>
</pre></div>
</div>
<blockquote>
<div><p>Tip: In the above error message the <code class="docutils literal notranslate"><span class="pre">(2,18)</span></code> indicates that the issue was detected
in row 2 column 18.</p>
</div></blockquote>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://learn.microsoft.com/en-us/azure/data-explorer/kusto/query/scalar-data-types/null-values">https://learn.microsoft.com/en-us/azure/data-explorer/kusto/query/scalar-data-types/null-values</a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ADXAuthentication.html" class="btn btn-neutral float-left" title="Authentication" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Dynamics.html" class="btn btn-neutral float-right" title="Dynamic Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2024, MathWorks, Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>